<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Microservices Learning Pack — High-Fidelity Prototype</title>
<style>
  :root{
    --bg:#0f172a;        /* slate-900 */
    --panel:#111827;     /* gray-900 */
    --muted:#94a3b8;     /* slate-400 */
    --text:#e5e7eb;      /* gray-200 */
    --brand:#6366f1;     /* indigo-500 */
    --accent:#22d3ee;    /* cyan-400 */
    --success:#22c55e;   /* green-500 */
    --danger:#ef4444;    /* red-500 */
    --warn:#f59e0b;      /* amber-500 */
    --card:#0b1220;      /* darker panel */
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background: linear-gradient(180deg,#0b1020, #0f172a 40%, #0b1020);
    color: var(--text);
    line-height:1.6;
  }
  header{
    position:sticky; top:0; z-index:10;
    background: rgba(15,23,42,.9);
    backdrop-filter: blur(8px);
    border-bottom:1px solid #1f2937;
  }
  .container{max-width:1100px; margin:0 auto; padding: 18px;}
  .hero{padding: 36px 0 6px 0;}
  .badge{display:inline-block; padding:6px 10px; font-size:12px; border:1px solid #334155; border-radius:999px; color:var(--muted);}
  h1{font-size: clamp(28px, 3vw, 40px); margin:8px 0 4px; letter-spacing: .2px;}
  h2{font-size: clamp(20px, 2.2vw, 28px); margin: 26px 0 6px; border-left:4px solid var(--brand); padding-left:10px;}
  h3{font-size: 18px; margin:18px 0 6px; color:#dbeafe;}
  p{color:#d1d5db}
  .card{
    background: linear-gradient(180deg, #0b1220, #0f172a);
    border:1px solid #1f2937; border-radius:16px; padding:18px; margin:14px 0;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
  }
  .grid{display:grid; gap:16px;}
  @media(min-width:900px){ .grid-2{grid-template-columns: 1.2fr 1fr;} }
  .pill{display:inline-block; padding:6px 10px; border-radius:999px; background:#111827; border:1px solid #1f2937; margin:4px 6px 0 0; color:#cbd5e1; font-size:12px}
  .objectives li{margin-bottom:6px}
  .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; background:#0b1220; color:#e2e8f0; border:1px solid #1f2937; padding:2px 6px; border-radius:6px}
  .media{display:flex; align-items:center; justify-content:center; background:#0b1220; border:1px solid #1f2937; border-radius:14px; padding:8px; min-height:220px}
  .media img{max-width:100%; border-radius:10px}
  details{background:#0b1220; border:1px solid #1f2937; border-radius:10px; padding:10px 12px; margin-top:10px}
  details > summary{cursor:pointer; font-weight:600; color:#e2e8f0}
  .quiz{margin-top:10px}
  .question{margin:10px 0; padding:10px; background:#0b1220; border:1px solid #1f2937; border-radius:12px}
  .btn{
    border:1px solid #334155; background:linear-gradient(180deg,#1f2937,#111827);
    color:#e5e7eb; padding:10px 14px; border-radius:10px; cursor:pointer;
  }
  .btn:hover{filter:brightness(1.15)}
  .btn.primary{border-color: var(--brand); box-shadow: 0 0 0 2px rgba(99,102,241,.2) inset}
  .btn.success{border-color: var(--success);}
  .btn.warn{border-color: var(--warn);}
  .muted{color:var(--muted)}
  .codebox{background:#0b1220; border:1px solid #1f2937; border-radius:10px; padding:10px}
  textarea{
    width:100%; min-height:140px; background:#0b1220; color:#e5e7eb; border:1px solid #1f2937; border-radius:8px; padding:10px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  }
  .callout{border-left:4px solid var(--accent); padding-left:10px}
  .score{font-weight:700}
  footer{padding:30px 0 60px; text-align:center; color:#93c5fd}
  .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0}
</style>
</head>
<body>
<header role="banner">
  <div class="container hero">
    <span class="badge" aria-hidden="true">EDHE502 · High-Fidelity Prototype</span>
    <h1>Week 5 · Microservices Architecture</h1>
    <p class="muted">Theory-to-Practical Learning Pack — standalone simulation</p>
  </div>
</header>

<main class="container" role="main">
  <section class="grid grid-2">
    <div class="card">
      <h2 id="objectives">Learning Objectives</h2>
      <ul class="objectives">
        <li>Explain microservices architecture and its benefits/drawbacks.</li>
        <li>Develop and secure a simple REST API with authentication.</li>
        <li>Evaluate when microservices are suitable vs. monoliths.</li>
      </ul>
      <div class="pill">Flexible</div><div class="pill">Inclusive</div><div class="pill">Practice-first</div>
    </div>
    <div class="card media" aria-labelledby="diagram-title">
      <h3 id="diagram-title" class="sr-only">API Gateway Diagram Animation</h3>
      <img src="Picture1.png" alt="Diagram showing clients calling an API Gateway, which routes to microservices A, B, and C with an authentication service." />
    </div>
  </section>

  <section class="card">
    <h2>Theory Summary</h2>
    <p><strong>Definition:</strong> A microservices architecture structures an application as a set of small, loosely coupled, independently deployable services that communicate over network APIs.</p>
    <div class="grid">
      <div class="card">
        <h3>Key Characteristics</h3>
        <ul>
          <li><strong>Independence:</strong> Each service owns its lifecycle and data store.</li>
          <li><strong>Communication:</strong> HTTP/REST or messaging (e.g., queues).</li>
          <li><strong>Resilience:</strong> Failures are isolated when properly designed.</li>
        </ul>
      </div>
      <div class="card">
        <h3>Benefits & Trade‑offs</h3>
        <ul>
          <li><span class="success">✔</span> Independent scaling and deployment.</li>
          <li><span class="success">✔</span> Technology diversity per service.</li>
          <li><span class="warn">▲</span> Increased operational complexity.</li>
          <li><span class="warn">▲</span> Observability, testing, and data consistency challenges.</li>
        </ul>
      </div>
      <div class="card">
          <h3>How Microservices Work</h3>
          <img src="Picture2.png" width="75%" height="75%"/>
        </div>
    </div>
    <details>
      <summary>See real‑world flow (e‑commerce case)</summary>
      <p>User places an order → API Gateway → Order Service → Inventory Service → Payment Service → Response. Services publish events to a message bus to keep data eventually consistent.</p>
    </details>
  </section>

  <section class="card">
    <h2>Coding Task — Beginner</h2>
    <p>Create an endpoint <code class="kbd">/status</code> that returns <code class="kbd">{ "service":"User","status":"Running" }</code>.</p>
    <div class="codebox">
      <label for="code1" class="sr-only">Paste your code here</label>
      <textarea id="code1" spellcheck="false" aria-label="Beginner task code editor">// Paste a Node.js Express handler here
// Example scaffold:
/*
const express = require('express');
const app = express();
app.get('/status', (req,res)=>{
  res.json({ service: 'User', status: 'Running' });
});
app.listen(3000);
*/
      </textarea>
      <button class="btn primary" onclick="checkBeginner()">Check my output</button>
      <span id="res1" class="pill" aria-live="polite"></span>
    </div>
    <details>
      <summary>Need a hint?</summary>
      <ul>
        <li>Use <code class="kbd">res.json({...})</code> to return JSON.</li>
        <li>Make sure your path is exactly <code class="kbd">/status</code>.</li>
      </ul>
    </details>
  </section>

  <section class="card">
    <h2>Coding Task — Advanced</h2>
    <p>Protect the <code class="kbd">/status</code> route with JWT authentication.</p>
    <div class="codebox">
      <label for="code2" class="sr-only">Paste your code here</label>
      <textarea id="code2" spellcheck="false" aria-label="Advanced task code editor">// Add JWT middleware using 'jsonwebtoken'
// Pseudocode pattern:
/*
const jwt = require('jsonwebtoken');
function auth(req,res,next){
  const token = (req.headers.authorization||'').replace('Bearer ','')
  try { jwt.verify(token, 'secret'); next(); }
  catch(e){ return res.status(401).json({error:'Invalid token'}); }
}
app.get('/status', auth, (req,res)=>{ ... })
*/
      </textarea>
      <button class="btn primary" onclick="checkAdvanced()">Run checks</button>
      <span id="res2" class="pill" aria-live="polite"></span>
    </div>
    <details>
      <summary>Hints</summary>
      <ul>
        <li>Install <code class="kbd">jsonwebtoken</code>, create an <code class="kbd">auth</code> middleware, and place it before the handler.</li>
        <li>Return <code class="kbd">401</code> for missing/invalid tokens.</li>
      </ul>
    </details>
  </section>

  <section class="card quiz" id="quiz">
    <h2>Weekly Quiz</h2>
    <a href="https://create.kahoot.it/details/7765f153-ac82-4b34-9129-c42128bd413d">Start Quick Quiz</a>
  </section>

  <section class="card">
    <h2>Peer Discussion</h2>
    <p><strong>Prompt:</strong> Your company is migrating from a monolith to microservices. Identify the top three challenges and propose strategies to address them (e.g., data consistency, observability, deployment).</p>
    <p class="muted">In the LMS, this will be a threaded forum with voting and a “Top Contributor” badge.</p>
  </section>

  <section class="card">
    <h2>Accessibility & UX Notes</h2>
    <ul>
      <li>Semantic headings and ARIA labels on interactive elements.</li>
      <li>High‑contrast palette and focusable controls.</li>
      <li>Animations are decorative; critical information is available as text.</li>
    </ul>
  </section>
</main>

<footer role="contentinfo">
  <p>Prototype © 2025 — Microservices Learning Pack • Standalone HTML</p>
</footer>

<script>
function checkBeginner(){
  const code = document.getElementById('code1').value;
  const ok = code.includes(\"/status\") && code.toLowerCase().includes(\"res.json\") && code.includes(\"service\") && code.includes(\"User\") && code.includes(\"Running\");
  const res = document.getElementById('res1');
  res.textContent = ok ? 'Looks correct — /status returns expected JSON.' : 'Check path and JSON payload (service & status).';
  res.style.borderColor = ok ? 'var(--success)' : 'var(--danger)';
}

function checkAdvanced(){
  const code = document.getElementById('code2').value;
  const hasJWT = /jsonwebtoken/.test(code) || /jwt/i.test(code);
  const hasMW = /auth\\s*\\(/.test(code) || /function\\s+auth/.test(code);
  const protects = /app\\.get\\(\\s*['\\\"]\\/status['\\\"].*auth/.test(code.replace(/\\n|\\r/g,'')) || /auth.*app\\.get\\(\\s*['\\\"]\\/status/.test(code.replace(/\\n|\\r/g,''));
  const res = document.getElementById('res2');
  const ok = hasJWT && hasMW && protects;
  res.textContent = ok ? 'JWT middleware detected and /status appears protected.' : 'Add jsonwebtoken, an auth() middleware, and apply it to /status.';
  res.style.borderColor = ok ? 'var(--success)' : 'var(--danger)';
}

function grade(){
  let score = 0; let total = 3; let explain = [];
  const q1 = document.querySelector('input[name=\"q1\"]:checked');
  if(q1 && q1.value === 'right'){ score++; } else { explain.push('Q1: API Gateway handles routing, auth, and monitoring.'); }
  const q2 = document.querySelector('input[name=\"q2\"]:checked');
  if(q2 && q2.value === 'right'){ score++; } else { explain.push('Q2: Each microservice should own its data storage.'); }
  const q3 = document.getElementById('q3').value.trim().toLowerCase();
  if(q3.includes('message') || q3.includes('queue') || q3.includes('messaging')){ score++; } else { explain.push('Q3: Common alternatives include message queues / messaging.'); }
  document.getElementById('score').textContent = `Score: ${score}/${total}`;
  document.getElementById('explain').textContent = explain.length ? ('Feedback: ' + explain.join(' ')) : 'Excellent — you nailed it!';
}
</script>
</body>
</html>
